
/////////////////////
// Load the volumes.
/////////////////////

// This code is a en excerpt of javascript which is inserted within
// the initializing function of the brainbrowser viewer. Typically
// this main brainbrowser function is in a view partial located in the plugin
// where the MincFile rails model is stored:
//   cbrain-plugins-neuro/userfiles/minc_file/views/_volume_viewer.html.erb
//
// This code will load the content of the volume to be displayed
// from a NiftiFile. Other volume userfiles supply a piece of code of
// similar function that differ only in how the javascript code
// loads the volume data.

viewer.loadVolumes({
  volumes: [
    {
      type: "nifti1",
      nii_url:     "<%= content_userfile_path(@userfile) %>?content_loader=collection_file&arguments=<%= @userfile.name + "/f_inskull_mask.nii" %>",
    },
  ],
  complete: function() {
    loading_div.hide();
    $("#brainbrowser-wrapper").slideDown({duration: 600});
  }
});
