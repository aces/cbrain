<h1>Registering Files on CBRAIN</h1>

<p>A Data Provider is local or remote data storage that CBRAIN is aware of.  To avoid having to upload very large files, you can access your files from a local or remote computer by setting up a data provider.  The interface for data providers is under the Data Providers tab.  Groups facilitate access to Data Providers.  Only users belonging to a particular group associated with a given Data Provider will have access to it.  In the figure below, you can see that the user has access to MainStore, MindStore, Incoming and DemoProvider. Files are stored in a cache (temporary storage centre) on the servers on the cluster in order to enable processing.  These files can be removed by selecting the data provider cache and the button Cleanup Selected Caches.  Disk usage statistics for data providers and data provider caches are also listed.</p>

<img src="/doc/data_providers/data_provider_index.png">

<p>
  In order to access your files from a local or remote computer, a SShDataProvider (Secure Shell Data Provider) must be configured.  In order to create a data provider, a select Create New Data Provider on the main Data Provider interface.  The interface to create a new data provider is shown below.  
</p>

<img src="/doc/data_providers/create_new_provider.png">

<br>
<br>

The following fields are required:</p>

<ul>
    <li><b>Name</b></li>
    <ul>
        <li>Assign a name to your data provider.</li>
    </ul>
    <li><b>Description</b></li>
    <ul>
        <li>Enter a short description about the data provider</li>
    </ul>
    <li><b>Type</b></li>
    <ul>
        <li>Select the Secure Shell data provider (SShDataProvider) to ensure secure transmission of data.</li>
    </ul>
    <li><b>Owner</b></li>
    <ul>
        <li>Assign the owner of the data provider. 
        <ul> 
            <li>This refers to the owner of the data available on the data provider.</li>
        </ul>
    </ul>
    <li><b>Group</b></li>
        <ul>
            <li>This refers to the group that has access to the data provider.  You can assign your personal group (listed as your login name) to the data provider, giving access to your data provider to only yourself.  Or you can give access to any available group listed in the drop down.</li>
        </ul>
    <li><b>Status</b></li>
        <ul>
            <li>A data provider can be offline or online.  Note, only data providers that are online maybe accessed.</li>
        </ul>
    <li><b>Mode</b></li> 
        <ul>
            <li>The mode can be read only where data can only be read from the provider.  It can also be read/write meaning data may also be written to the data provider.</li>
        </ul>
    <li><b>Remote Hostname</b></li>
        <ul>
            <li>Enter the name of the host that the data is on.  You can find the hostname on a Unix system by opening a shell and typing hostname in the terminal.
            </li>
        </ul>
    <li><b>Remote Username</b></li>
        <ul>
            <li>Enter the host username.</li>
            <li>Remote Port Number</li>
                <ul>
                    <li>Refers to the port number that the data will be transferred through.  Typically it is the SSH port number 22 unless otherwise specified by a system administrator.</li>
                </ul>
            <li>Directory</li>
                <ul>
                    <li>Refers to the directory that the data files are stored in on the host</li>
                </ul>
        </ul>
</ul>

<br>

SSH (Secure Shell) allows the execution servers (such as MindStorm and BrainStorm) to have a secure a channel to transfer data to and from the computer hosting the data files.  For each execution server that you want, for example BrainStorm and MindStorm, to execute tasks on the files stored on your data provider you need to have public SSH keys (displayed on the interface below).  Copies of these SSH keys must be pasted into the ~/.ssh/authorized_keys file on your host computer (on a Unix system).  If you do not have this file on your system, you need to create it.  Do not leave any blank spaces in the file.  Click on the Create button to create your data provider after filling in the information and copying the SSH keys to the authorize_keys file.

<br>
<img src="/doc/data_providers/ssh_keys.png">
<br>
<br>

If you go back to the main Data Provider page you will now see your new data provider.  In this case, the data provider created was called DemoProvider.  It is online, alive and has read and write capabilities.  Since it belongs to you, you can edit it, browse the directory you specified when you set it up and delete it as shown in the figure below.

<br>
<img src="/doc/data_providers/browse_data_provider.png">
<br>

If you Browse the data provider, you are able to see the files available on the data provider (see figure below).  These files maybe selected and registered.  Registering a file makes it available on the Files tab page making it accessible for processing by the tools available to you without having to upload it.  As shown in the figure below, study1 is a directory.  To register the directory it must be encapsulated into a FileCollection or CivetCollection.  Files can be extracted once they are registered as a FileCollection or a CivetCollection.

<br>
<br>
<img src="/doc/data_providers/register_files.png">
<br>
<br>

After you register a directory as, for example, a FileCollection it is then included in the list of files in the Files tab.  You can open the details of the file by clicking on the filename.  The file details for study1 are shown below.  In order to view the displayable contents and extract files from this collection you must synchronize the collection (see the bottom of the figure below).

<br>
<br>
<img src="/doc/data_providers/file_details.png">
