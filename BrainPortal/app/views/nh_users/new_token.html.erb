
<%-
#
# NeuroHub Project
#
# Copyright (C) 2020
# The Royal Institution for the Advancement of Learning
# McGill University
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
-%>

<% title("New API Token", '') %>

<div id="nh_token_new" class="nh_content">
  <form class="card">
    <div class="card-section bg-default-wash">
      <div class="card-heading"><b>New API token</b></div>
    </div>

    <div class="card-section">
      <div class="card-item">
        <div>
          <p class="card-label">
            We have just generated a new API token for you:
          </p>
          <p class="field-description">
            <pre><%= @new_token %></pre>
          </p>
          <div class="field-description">
            If you are a developer and want to automate working
            with CBRAIN or NeuroHub, this token will be needed
            to access the APIs.
            <p class="field_note">
              Refer to the CBRAIN API documentation
              for more information.
            </p>
          </div>
          <a style="max-width:200px" class="btn-text cbrain bg-cbrain-wash"  target="_blank" href="https://app.swaggerhub.com/apis/prioux/CBRAIN/5.1.3#/">
            CBRAIN API
          </a>
        </div>
      </div>
    </div>

    <div class="card-section bg-default-wash">
      <div class="card-item">
        <div>
          <p class="card-label"><strong>A few notes about this token:</strong></p>
          <% pretty_how_long = SessionHelpers::SESSION_API_TOKEN_VALIDITY.inspect %>
          <ul>

            <li class="field-description">
              This token will only be valid for <%= pretty_how_long %>.
            </li>

            <li class="field-description">
              Every time a request is made with it, it becomes valid for another <%= pretty_how_long %>.
            </li>

            <li class="field-description">
              The first time it is used, the IP address of the connecting client will be
              recorded and only connections from that IP address will be valid.
            </li>

            <li class="field-description">
              If a subsequent connection comes from any other IP address at any time,
              the token will immediately be invalidated.
            </li>

          </ul>
        </div>
      </div>
    </div>
  </form>
</div>

