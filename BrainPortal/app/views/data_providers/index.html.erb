
<%

#
# CBRAIN Project
#
# Original author: Pierre Rioux
#
# $Id$
#

-%>

<% title 'Data Providers' %>

<h1>Configured CBRAIN Data Providers</h1>

<table>
   <tr>
       <th>Provider Name</th>
       <th>Owner</th>
       <th>Group</th>
       <th>Online?</th>
       <th>Mode</th>
       <th>Description</th>
       <th colspan="3">Operations</th>
   </tr>

   <% for prov in @providers %>
       <tr class="<%= cycle('list-odd', 'list-even') %>">
         <td><%= link_to prov.name, :controller => :data_providers, :action => :show, :id => prov.id %></td>
         <td><%= h(prov.user.login) %></td>
         <td><%= h(prov.group.name) %></td>
         <td><%= h(prov.online ? "Yes" : "No") %></td>
         <td><%= h(prov.read_only ? "Read Only" : "Read/Write") %></td>
         <td><%= h(prov.description) %></td>
         <td>
            <% if check_role(:admin) || prov.user_id == current_user.id %>
            <%= button_to 'Edit', edit_data_provider_path(prov), :method => :get %>
            <% end %>
         </td>
         <td>
            <% if check_role(:admin) || prov.user_id == current_user.id %>
            <%= button_to 'Delete', data_provider_path(prov), :confirm => 'Are you sure?', :method => :delete %>
            <% end %>
         </td>
         <td>
            <% if check_role(:admin) || prov.can_be_accessed_by(current_user) %>
            <%= button_to 'Browse', browse_data_provider_path(prov), :method => :get %>
            <% end %>
         </td>
       </tr>
   <% end %>

   <% if @providers.nil? || @providers.empty? %>
     <tr class="list-odd"><td colspan="9">There are no providers in this list.</td></tr>
   <% end %>

</table>

<%= button_to 'Create New Data Provider', new_data_provider_path, :method => :get %>
