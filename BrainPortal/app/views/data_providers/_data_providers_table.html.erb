
<%-
#
# CBRAIN Project
#
# Copyright (C) 2008-2012
# The Royal Institution for the Advancement of Learning
# McGill University
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.  
#
-%>

<%
   user_storage     = @data_providers.select { |dp|   dp.is_browsable? }
   official_storage = @data_providers.select { |dp| ! dp.is_browsable? }
%>

<div class="menu_bar">

  <% if check_role(:site_manager) || check_role(:admin_user) %>
    <%= new_model_button "Create New Data Provider", new_data_provider_path %>
  <% end %> 

  <%= ajax_link (@filter_params["details"] == 'on' ? "Hide Details" : "Show Details" ),
              {:controller  => :data_providers, :action  => :index, :data_providers  => {:details  => set_toggle(@filter_params["details"])}},
              :datatype  => 'script', :class  => "button"
  %>

  <%= link_to "User Access Report",
             {:controller  => :data_providers, :action  => :dp_access},
              :datatype  => 'script', :class  => "button"
  %>   
  
  <%= link_to "Transfer Restrictions Report",
             {:controller  => :data_providers, :action  => :dp_transfers},
              :datatype  => 'script', :class  => "button"
  %>   
  
  <%= link_to "Disk Usage Report",
              {:controller  => :data_providers, :action  => :dp_disk_usage},
              :datatype  => 'script', :class  => "button"
  %>   
  
  <%= overlay_ajax_link "Help", "/doc/data_providers/data_provider_info.html", :class  => "button" %>    
</div>

<div class="active_status">
  <span class="active_status_left_side">
    <%= render :partial => 'shared/active_filters', :locals => {:model => :data_provider} %>
  </span>
</div>

<fieldset>
<legend>Official Data Storage</legend>
  <%= render :partial => 'one_data_provider_table', :locals => { :data_providers => official_storage, :id => 'official' } %>
</fieldset>

<P>                 

<fieldset>
<legend>User or Site Storage</legend>
  <%= render :partial => 'one_data_provider_table', :locals => { :data_providers => user_storage, :id => 'user' } %>
</fieldset>

